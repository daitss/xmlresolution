<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: PlainXmlDocument</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (P)</a> &raquo; 
    
    
    <span class="title">PlainXmlDocument</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: PlainXmlDocument
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Nokogiri::XML::SAX::Document</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Nokogiri::XML::SAX::Document</li>
          
            <li class="next">PlainXmlDocument</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">/Users/fischer/WorkProjects/daitss2/xmlresolution/lib/xmlresolution/xml_processors.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Class PlainXmlDocument subclasses Nokogiri::XML::SAX::Document
</p>
<p>
The purpose of PlainXmlDocument is to work in concert with the  Nokogiri
SAX parser to analyze a submitted XML Document. It accumulates information
about namespaces and schema locations in the XML Document.
</p>
<p>
The XML document text to be analyzed is not directly accessed by the
PlainXmlDocument object; rather, the XML document is used in concert with
the object and the SAX::Parser, as in the following example:
</p>
<pre class="code">
     <span class='document identifier id'>document</span> <span class='assign token'>=</span> <span class='PlainXmlDocument constant id'>PlainXmlDocument</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
     <span class='Nokogiri constant id'>Nokogiri</span><span class='colon2 op'>::</span><span class='XML constant id'>XML</span><span class='colon2 op'>::</span><span class='SAX constant id'>SAX</span><span class='colon2 op'>::</span><span class='Parser constant id'>Parser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='document identifier id'>document</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='XML constant id'>XML</span><span class='minus op'>-</span><span class='DOCUMENT constant id'>DOCUMENT</span><span class='minus op'>-</span><span class='TEXT constant id'>TEXT</span><span class='rparen token'>)</span>
     <span class='dot3 op'>...</span> <span class='use identifier id'>use</span> <span class='document identifier id'>document</span> <span class='methods identifier id'>methods</span> <span class='dot3 op'>...</span>
</pre>
<p>
The PlainXmlDocument object registers callbacks with the SAX parser. We
register only a few of the basic SAX event callbacks, namely:
</p>
<pre class="code">
  <span class='mult op'>*</span> <span class='start_element_namespace identifier id'>start_element_namespace</span>
  <span class='mult op'>*</span> <span class='error identifier id'>error</span>
  <span class='mult op'>*</span> <span class='warning identifier id'>warning</span>
  <span class='mult op'>*</span> <span class='xml_decl identifier id'>xml_decl</span>
</pre>
<p>
Analysis of the elements provided by the first of these callbacks allows us
to record the namespaces that are actually used by elements and their
attributes.  Errors, warnings, and the XML declaration are also collected
in the course of the parsing. Methods are added to the PlainXmlDocument
class to return these data.
</p>


  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="SchemaDocument.html" title="SchemaDocument (class)">SchemaDocument</a></span></p>
</div>


  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#errors-instance_method" title="#errors (instance method)">- (Object) <strong>errors</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
An array of strings, these are all of the errors issued by the SAX parser
when this object is processed.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#version-instance_method" title="#version (instance method)">- (Object) <strong>version</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The string version for the XML document as extracted from the XMl
declaration; if no such declaration encountered, &#8216;1.0&#8217;.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#warnings-instance_method" title="#warnings (instance method)">- (Object) <strong>warnings</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
An array of strings, these are all of the warnings issued by the SAX parser
when this object is processed.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#check_for_locations-instance_method" title="#check_for_locations (instance method)">- (Object) <strong>check_for_locations</strong>(attributes) </a>
    

    
  </span>
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
check_for_locations ATTRIBUTES.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#error-instance_method" title="#error (instance method)">- (Object) <strong>error</strong>(string) </a>
    

    
  </span>
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
error STRING.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (PlainXmlDocument) <strong>initialize</strong>(used_namespaces = {}) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
DOC = PlainXmlDocument.new [ USED_NAMESPACES ].
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#namespace_locations-instance_method" title="#namespace_locations (instance method)">- (Object) <strong>namespace_locations</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
namespace_locations.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#start_element_namespace-instance_method" title="#start_element_namespace (instance method)">- (Object) <strong>start_element_namespace</strong>(element_name, attributes = [], prefix = nil, uri = nil, namespace = []) </a>
    

    
  </span>
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
start_element_namespace ELEMENT_NAME, ATTRIBUTES, PREFIX, URI, NAMESPACE.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#used_namespaces-instance_method" title="#used_namespaces (instance method)">- (Object) <strong>used_namespaces</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
used_namespaces.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#warning-instance_method" title="#warning (instance method)">- (Object) <strong>warning</strong>(string) </a>
    

    
  </span>
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
warning STRING.
</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#xmldecl-instance_method" title="#xmldecl (instance method)">- (Object) <strong>xmldecl</strong>(version, encoding, standalone) </a>
    

    
  </span>
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
xmldecl  VERSION, ENCODING, STANDALONE.
</p>
</div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="PlainXmlDocument (class)">PlainXmlDocument</a></span></tt>) <strong>initialize</strong>(used_namespaces = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
DOC = PlainXmlDocument.new [ USED_NAMESPACES ]
</p>
<p>
The purpose of this object is to garner a list of namespaces actually used
by a document.  The optional USED_NAMESPACE hash, if given, will be
augmented by namespaces encountered in the document.  USED_NAMESPACES is a
hash where only the keys (Namespace URNs) are important.
</p>
<p>
DOC will eventually be passed to Nokogiri::XML::SAX::Parser to be
populated; see the XmlResolution::XMLResolver class.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/xmlresolution/lib/xmlresolution/xml_processors.rb', line 65</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span> <span class='used_namespaces identifier id'>used_namespaces</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="errors-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="errors-instance_method">
  
    - (<tt>Object</tt>) <strong>errors</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
An array of strings, these are all of the errors issued by the SAX parser
when this object is processed.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/xmlresolution/lib/xmlresolution/xml_processors.rb', line 47</span>

<span class='def def kw'>def</span> <span class='errors identifier id'>errors</span>
  <span class='@errors ivar id'>@errors</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="version-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="version-instance_method">
  
    - (<tt>Object</tt>) <strong>version</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The string version for the XML document as extracted from the XMl
declaration; if no such declaration encountered, &#8216;1.0&#8217;.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52
53
54</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/xmlresolution/lib/xmlresolution/xml_processors.rb', line 52</span>

<span class='def def kw'>def</span> <span class='version identifier id'>version</span>
  <span class='@version ivar id'>@version</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="warnings-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="warnings-instance_method">
  
    - (<tt>Object</tt>) <strong>warnings</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
An array of strings, these are all of the warnings issued by the SAX parser
when this object is processed.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/xmlresolution/lib/xmlresolution/xml_processors.rb', line 43</span>

<span class='def def kw'>def</span> <span class='warnings identifier id'>warnings</span>
  <span class='@warnings ivar id'>@warnings</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="check_for_locations-instance_method">
  
    - (<tt>Object</tt>) <strong>check_for_locations</strong>(attributes)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
check_for_locations ATTRIBUTES
</p>
<p>
Given the array ATTRIBUTES of the SAX-parsed attributes object (which
include the methods &#8216;localname&#8217;, &#8216;prefix&#8217;,
&#8216;uri&#8217; and &#8216;value&#8217; such that &#8216;uri&#8217; is
the namespace of the unprefixed attribute name &#8216;localname&#8217;),
check if it includes a schemaLocation  and if so, parse its values, adding
to the internal @locations hash.
</p>
<p>
Consider this fragment of a METs instance document:
</p>
<pre class="code">
   <span class='lt op'>&lt;</span><span class='METS constant id'>METS</span><span class='symbol val'>:mets</span> <span class='xmlns identifier id'>xmlns</span><span class='symbol val'>:METS=</span><span class='string val'>&quot;http://www.loc.gov/METS/&quot;</span>
              <span class='xmlns identifier id'>xmlns</span><span class='symbol val'>:daitss=</span><span class='string val'>&quot;http://www.fcla.edu/dls/md/daitss/&quot;</span>
              <span class='xmlns identifier id'>xmlns</span><span class='symbol val'>:dc=</span><span class='string val'>&quot;http://purl.org/dc/elements/1.1/&quot;</span>
            <span class='xmlns identifier id'>xmlns</span><span class='symbol val'>:mods=</span><span class='string val'>&quot;http://www.loc.gov/mods/v3&quot;</span>
              <span class='xmlns identifier id'>xmlns</span><span class='symbol val'>:palmm=</span><span class='string val'>&quot;http://www.fcla.edu/dls/md/palmm/&quot;</span>
              <span class='xmlns identifier id'>xmlns</span><span class='symbol val'>:rightsmd=</span><span class='string val'>&quot;http://www.fcla.edu/dls/md/rightsmd/&quot;</span>
              <span class='xmlns identifier id'>xmlns</span><span class='symbol val'>:techmd=</span><span class='string val'>&quot;http://www.fcla.edu/dls/md/techmd/&quot;</span>
              <span class='xmlns identifier id'>xmlns</span><span class='symbol val'>:xlink=</span><span class='string val'>&quot;http://www.w3.org/1999/xlink&quot;</span>
              <span class='xmlns identifier id'>xmlns</span><span class='symbol val'>:xsi=</span><span class='string val'>&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>

          <span class='LABEL constant id'>LABEL</span><span class='assign token'>=</span><span class='string val'>&quot;Florida Chautauqua&quot;</span> <span class='OBJID constant id'>OBJID</span><span class='assign token'>=</span><span class='string val'>&quot;SN00000005&quot;</span>
          <span class='TYPE constant id'>TYPE</span><span class='assign token'>=</span><span class='string val'>&quot;serial&quot;</span>

     <span class='xsi identifier id'>xsi</span><span class='symbol val'>:schemaLocation=</span><span class='string val'>&quot;http://www.loc.gov/METS/             http://www.loc.gov/standards/mets/mets.xsd
                         http://purl.org/dc/elements/1.1/     http://dublincore.org/schemas/xmls/simpledc20021212.xsd
                         http://www.loc.gov/mods/v3           http://www.loc.gov/standards/mods/v3/mods-3-0.xsd
                         http://www.fcla.edu/dls/md/techmd/   http://www.fcla.edu/dls/md/techmd.xsd
                         http://www.fcla.edu/dls/md/palmm/    http://www.fcla.edu/dls/md/palmm.xsd
                         http://www.fcla.edu/dls/md/rightsmd/ http://www.fcla.edu/dls/md/rightsmd.xsd
                         http://www.fcla.edu/dls/md/daitss/   http://www.fcla.edu/dls/md/daitss/daitss.xsd&quot;</span><span class='gt op'>&gt;</span>
</pre>
<p>
check_for_locations parses the &#8220;xsi:schemaLocation&#8221; attribute
into namespace-uri/location-url pairs, and enters them into the @locations
hash, which maintains an association of locations and the namespace.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191
192
193
194
195
196
197
198
199</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/xmlresolution/lib/xmlresolution/xml_processors.rb', line 189</span>

<span class='def def kw'>def</span> <span class='check_for_locations identifier id'>check_for_locations</span> <span class='attributes identifier id'>attributes</span>
  <span class='attributes identifier id'>attributes</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='attr identifier id'>attr</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='attr identifier id'>attr</span><span class='dot token'>.</span><span class='localname identifier id'>localname</span> <span class='eq op'>==</span> <span class='string val'>'schemaLocation'</span> <span class='and and kw'>and</span> <span class='attr identifier id'>attr</span><span class='dot token'>.</span><span class='uri identifier id'>uri</span> <span class='eq op'>==</span> <span class='string val'>'http://www.w3.org/2001/XMLSchema-instance'</span>
      <span class='pairs identifier id'>pairs</span> <span class='assign token'>=</span> <span class='attr identifier id'>attr</span><span class='dot token'>.</span><span class='value identifier id'>value</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='regexp val'>/\s+/</span><span class='rparen token'>)</span>
      <span class='while while kw'>while</span> <span class='not not kw'>not</span> <span class='pairs identifier id'>pairs</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
        <span class='ns identifier id'>ns</span><span class='comma token'>,</span> <span class='loc identifier id'>loc</span> <span class='assign token'>=</span> <span class='pairs identifier id'>pairs</span><span class='dot token'>.</span><span class='slice! fid id'>slice!</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>1</span><span class='rparen token'>)</span>
        <span class='@locations ivar id'>@locations</span><span class='lbrack token'>[</span><span class='loc identifier id'>loc</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='ns identifier id'>ns</span> <span class='unless unless_mod kw'>unless</span> <span class='loc identifier id'>loc</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> 
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="error-instance_method">
  
    - (<tt>Object</tt>) <strong>error</strong>(string)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
error STRING
</p>
<p>
STRING provides a message encountered when an error condition occurs during
document parsing; we record the message on the  errors attribute, an array
of strings.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/xmlresolution/lib/xmlresolution/xml_processors.rb', line 140</span>

<span class='def def kw'>def</span> <span class='error identifier id'>error</span> <span class='string identifier id'>string</span>
  <span class='errors identifier id'>errors</span><span class='dot token'>.</span><span class='push identifier id'>push</span> <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='chomp identifier id'>chomp</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="namespace_locations-instance_method">
  
    - (<tt>Object</tt>) <strong>namespace_locations</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
namespace_locations
</p>
<p>
Returns a hash of Location-URL/Namespace-URN key/value pairs  where the use
of a Namespace-URN has been encountered during element and attribute
parsing.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97
98
99
100
101</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/xmlresolution/lib/xmlresolution/xml_processors.rb', line 95</span>

<span class='def def kw'>def</span> <span class='namespace_locations identifier id'>namespace_locations</span>
  <span class='used_locations identifier id'>used_locations</span> <span class='assign token'>=</span> <span class='Hash constant id'>Hash</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='@locations ivar id'>@locations</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='loc identifier id'>loc</span><span class='bitor op'>|</span>
    <span class='used_locations identifier id'>used_locations</span><span class='lbrack token'>[</span><span class='loc identifier id'>loc</span><span class='rbrack token'>]</span> <span class='assign token'>=</span>  <span class='@locations ivar id'>@locations</span><span class='lbrack token'>[</span><span class='loc identifier id'>loc</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='@used_namespaces ivar id'>@used_namespaces</span><span class='lbrack token'>[</span><span class='@locations ivar id'>@locations</span><span class='lbrack token'>[</span><span class='loc identifier id'>loc</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
  <span class='used_locations identifier id'>used_locations</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="start_element_namespace-instance_method">
  
    - (<tt>Object</tt>) <strong>start_element_namespace</strong>(element_name, attributes = [], prefix = nil, uri = nil, namespace = [])  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
start_element_namespace ELEMENT_NAME, ATTRIBUTES, PREFIX, URI, NAMESPACE
</p>
<p>
SAX calls this method as it encounters new elements.  We mine the elements
and attributes for their namespace URIs; we also check for schemaLocation
elements. Note that the namespace for this element is included as the URI;
NAMESPACE is an array  of the xmlns declarations for this node (if nay),
which may include namespaces not actually used by the document.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/xmlresolution/lib/xmlresolution/xml_processors.rb', line 126</span>

<span class='def def kw'>def</span> <span class='start_element_namespace identifier id'>start_element_namespace</span> <span class='element_name identifier id'>element_name</span><span class='comma token'>,</span> <span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='prefix identifier id'>prefix</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='uri identifier id'>uri</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='namespace identifier id'>namespace</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@used_namespaces ivar id'>@used_namespaces</span><span class='lbrack token'>[</span><span class='uri identifier id'>uri</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span> <span class='unless unless_mod kw'>unless</span> <span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='attributes identifier id'>attributes</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> 
    <span class='@used_namespaces ivar id'>@used_namespaces</span><span class='lbrack token'>[</span><span class='a identifier id'>a</span><span class='dot token'>.</span><span class='uri identifier id'>uri</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span> <span class='unless unless_mod kw'>unless</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='end end kw'>end</span>
  <span class='check_for_locations identifier id'>check_for_locations</span> <span class='attributes identifier id'>attributes</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="used_namespaces-instance_method">
  
    - (<tt>Object</tt>) <strong>used_namespaces</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
used_namespaces
</p>
<p>
Returns a hash of the namespaces extracted from the element and attribute
information parsed by the SAX processor: only those namespaces actually
used by the XML document are recorded.  This will be identical to the
optional hash argument to our constructor if it was provided.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/xmlresolution/lib/xmlresolution/xml_processors.rb', line 82</span>

<span class='def def kw'>def</span> <span class='used_namespaces identifier id'>used_namespaces</span>
  <span class='@used_namespaces ivar id'>@used_namespaces</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="warning-instance_method">
  
    - (<tt>Object</tt>) <strong>warning</strong>(string)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
warning STRING
</p>
<p>
STRING provides a message encountered when a warning condition occurs
during document processing; we record the message on the warnings
attribute, an array of strings.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/xmlresolution/lib/xmlresolution/xml_processors.rb', line 150</span>

<span class='def def kw'>def</span> <span class='warning identifier id'>warning</span> <span class='string identifier id'>string</span>
  <span class='warnings identifier id'>warnings</span><span class='dot token'>.</span><span class='push identifier id'>push</span> <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='chomp identifier id'>chomp</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="xmldecl-instance_method">
  
    - (<tt>Object</tt>) <strong>xmldecl</strong>(version, encoding, standalone)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
xmldecl  VERSION, ENCODING, STANDALONE
</p>
<p>
Called when an XML declaration node is encountered; we record the XML
version as the object attribute version, otherwise defaults to
&#8216;1.0&#8217;
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/xmlresolution/lib/xmlresolution/xml_processors.rb', line 113</span>

<span class='def def kw'>def</span> <span class='xmldecl identifier id'>xmldecl</span> <span class='version identifier id'>version</span><span class='comma token'>,</span> <span class='encoding identifier id'>encoding</span><span class='comma token'>,</span> <span class='standalone identifier id'>standalone</span>
  <span class='@version ivar id'>@version</span> <span class='assign token'>=</span> <span class='version identifier id'>version</span> <span class='unless unless_mod kw'>unless</span> <span class='version identifier id'>version</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu May 12 23:35:22 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.0 (ruby-1.8.7).
</div>

  </body>
</html>